var autoSkipPattern=(()=>{var l=Object.create,o=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,c=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,e=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)(function(e){if("react"===e)return Spicetify.React;if("react-dom"===e)return Spicetify.ReactDOM;if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),t=(e,t,n)=>{n=null!=e?l(c(e)):{};var i=!t&&e&&e.__esModule?n:o(n,"default",{value:e,enumerable:!0}),s=e,a=void 0,r=void 0;if(s&&"object"==typeof s||"function"==typeof s)for(let e of u(s))p.call(i,e)||e===a||o(i,e,{get:()=>s[e],enumerable:!(r=d(s,e))||r.enumerable});return i},r=t(e("react")),i=t(e("react-dom")),f={settingsContainer:"settings-module__settingsContainer___e9wxn_autoSkipPattern",heading:"settings-module__heading___AnER-_autoSkipPattern",description:"settings-module__description___dP4fR_autoSkipPattern",inputWrapper:"settings-module__inputWrapper___LgOrw_autoSkipPattern"},n=class{constructor(e,t,n={}){this.name=e,this.settingsId=t,this.initialSettingsFields=n,this.settingsFields=this.initialSettingsFields,this.setRerender=null,this.buttonClassnames=null,this.pushSettings=async()=>{for(Object.entries(this.settingsFields).forEach(([e,t])=>{"button"!==t.type&&void 0===this.getFieldValue(e)&&this.setFieldValue(e,t.defaultValue)});!Spicetify?.Platform?.History?.listen;)await new Promise(e=>setTimeout(e,100));this.stopHistoryListener&&this.stopHistoryListener(),this.stopHistoryListener=Spicetify.Platform.History.listen(e=>{"/preferences"===e.pathname&&this.render()}),"/preferences"===Spicetify.Platform.History.location.pathname&&await this.render()},this.rerender=()=>{this.setRerender&&this.setRerender(Math.random())},this.render=async()=>{for(;!document.getElementById("desktop.settings.selectLanguage");){if("/preferences"!==Spicetify.Platform.History.location.pathname)return;await new Promise(e=>setTimeout(e,100))}const e=document.querySelector(".main-view-container__scroll-node-child main div");if(!e)return console.error("[spcr-settings] settings container not found");this.buttonClassnames=Array.from(e.querySelectorAll(":scope > button")).at(-1)?.className??null;let t=Array.from(e.children).find(e=>e.id===this.settingsId);t?console.log(t):((t=document.createElement("div")).id=this.settingsId,t.className=f.settingsContainer,e.appendChild(t)),i.default.render(r.default.createElement(this.FieldsContainer,null),t)},this.addButton=(e,t,n,i,s)=>{this.settingsFields[e]={type:"button",description:t,value:n,events:{onClick:i,...s}}},this.addInput=(e,t,n,i,s)=>{this.settingsFields[e]={type:"input",description:t,defaultValue:n,events:{onChange:i,...s}}},this.addHidden=(e,t)=>{this.settingsFields[e]={type:"hidden",defaultValue:t}},this.addToggle=(e,t,n,i,s)=>{this.settingsFields[e]={type:"toggle",description:t,defaultValue:n,events:{onChange:i,...s}}},this.addDropDown=(e,t,n,i,s,a)=>{this.settingsFields[e]={type:"dropdown",description:t,defaultValue:n[i],options:n,events:{onSelect:s,...a}}},this.getFieldValue=e=>JSON.parse(Spicetify.LocalStorage.get(this.settingsId+"."+e)||"{}")?.value,this.setFieldValue=(e,t)=>{Spicetify.LocalStorage.set(this.settingsId+"."+e,JSON.stringify({value:t}))},this.FieldsContainer=()=>{var[e,t]=(0,r.useState)(0);return this.setRerender=t,r.default.createElement("div",{className:f.settingsContainer,key:e},r.default.createElement("h2",{className:["main-shelf-title main-type-cello",f.heading].join(" ")},this.name),Object.entries(this.settingsFields).map(([e,t])=>r.default.createElement(this.Field,{nameId:e,field:t})))},this.Field=n=>{var e=this.settingsId+"."+n.nameId;let t;if(t="button"===n.field.type?n.field.value:this.getFieldValue(n.nameId),"hidden"===n.field.type)return r.default.createElement(r.default.Fragment,null);const[i,s]=(0,r.useState)(t),a=e=>{void 0!==e&&(s(e),this.setFieldValue(n.nameId,e))};return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"main-type-mesto",style:{color:"var(--spice-subtext)"}},r.default.createElement("label",{className:f.description,htmlFor:e},n.field.description||"")),r.default.createElement("span",{className:["x-settings-secondColumn",f.inputWrapper].join(" ")},"input"===n.field.type?r.default.createElement("input",{className:"main-dropDown-dropDown",id:e,dir:"ltr",value:i,type:"text",...n.field.events,onChange:e=>{a(e.currentTarget.value);const t=n.field.events?.onChange;t&&t(e)}}):"button"===n.field.type?r.default.createElement("span",{className:""},r.default.createElement("button",{id:e,className:this.buttonClassnames??"",...n.field.events,onClick:e=>{a();const t=n.field.events?.onClick;t&&t(e)},type:"button"},i)):"toggle"===n.field.type?r.default.createElement("label",{className:"x-toggle-wrapper x-settings-secondColumn"},r.default.createElement("input",{id:e,className:"x-toggle-input",type:"checkbox",checked:i,...n.field.events,onClick:e=>{a(e.currentTarget.checked);const t=n.field.events?.onClick;t&&t(e)}}),r.default.createElement("span",{className:"x-toggle-indicatorWrapper"},r.default.createElement("span",{className:"x-toggle-indicator"}))):"dropdown"===n.field.type?r.default.createElement("select",{className:"main-dropDown-dropDown",id:e,...n.field.events,onChange:e=>{a(n.field.options[e.currentTarget.selectedIndex]);const t=n.field.events?.onChange;t&&t(e)}},n.field.options.map((e,t)=>r.default.createElement("option",{selected:e===i,value:t+1},e))):r.default.createElement(r.default.Fragment,null)))}}};function a(e){if(!e)return null;e=e.match(new RegExp("^/(.*?)/([gimy]*)$"));return e?new RegExp(e[1],e[2]):null}var s=async function(){const s=await async function(){const e=new n("Auto skip pattern","settings-test");return e.addToggle("toggle-extension","Enable",!0),e.addInput("pattern-title","Title pattern(regular expression)",""),e.addInput("pattern-artist","Artist pattern(regular expression)",""),await e.pushSettings(),e}();Spicetify.Player.addEventListener("songchange",()=>{if(s.getFieldValue("toggle-extension")){var e=Spicetify.Player.data||Spicetify.Queue;if(e&&e.track){var e=e.track.metadata;if(e){var t=null!=(t=e.title)?t:"",e=null!=(e=e.artist_name)?e:"";const n=a(s.getFieldValue("pattern-title")),i=a(s.getFieldValue("pattern-artist"));(n&&n.test(t)||i&&i.test(e))&&Spicetify.Player.next()}}}})};(async()=>{await s()})()})();(async()=>{var e;document.getElementById("autoSkipPattern")||((e=document.createElement("style")).id="autoSkipPattern",e.textContent=String.raw`
  .settings-module__settingsContainer___e9wxn_autoSkipPattern{display:contents}.settings-module__heading___AnER-_autoSkipPattern{grid-column:1/-1;font-size:1.125rem;line-height:1.5rem;color:#fff;margin-top:24px}.settings-module__description___dP4fR_autoSkipPattern{font-size:.875rem;line-height:1.25rem}.settings-module__inputWrapper___LgOrw_autoSkipPattern{display:flex;justify-self:end}
      `.trim(),document.head.appendChild(e))})();